\documentclass[10pt, compress]{beamer}
\XeTeXlinebreaklocale "ja"
\XeTeXlinebreakskip=0em plus 0.1em minus 0.01em

\usetheme[usetitleprogressbar]{m}

\usepackage{booktabs}
\usepackage{minted}
\usepackage{fontawesome}
\usepackage{gnuplot-lua-tikz}

%%% user macro
\definecolor{links}{HTML}{DB4D6D} % NAKABENI
\hypersetup{colorlinks,linkcolor=,urlcolor=links}


\newcommand{\ehref}[2]{\href{#1}{#2 \hspace{-.2em}{\scriptsize\faExternalLink}}}
%\newcommand{\eurl}[1]{\url{#1{\scriptsize \hspace{-.2em}\faExternalLink}}}
%%%

\usepgfplotslibrary{dateplot}

\usemintedstyle{trac}

\title{マルチポート10G NICの試作}
\subtitle{}
%\date{\today}
%\author{Name (\ehref{http://twitter.com/twitter}{\faTwitter  twitter})}
\author{Yohei Kuga@KEIO Univ}
\institute{高速PCルータ研究会 2015/5}

\begin{document}

\maketitle

%% -------------------------------------------------- %%

\begin{frame}[fragile,t]{今日の話}
\begin{itemize}
\item FPGAで合成可能なSystemVerilogによるパケット処理を考える
\item NIC Offload機能の整理
\item Offload拡張機能
\end{itemize}
\end{frame}

%% -------------------------------------------------- %%

\begin{frame}[fragile,t]{その他のNIC実装}
\begin{itemize}
	\item VC709 Connectivity TRD
	\begin{itemize}
		\item 合成時間: 約2h
	\end{itemize}
	\item NetFPGA (NAAS)
\end{itemize}
\end{frame}

%% -------------------------------------------------- %%

\begin{frame}[fragile,t]{今日の話}

ネットワークを高機能化するためにNICを自由に拡張したい
\vspace{.5em}

最近のDC+SW界隈 (Kernel bypass/Unikernels) に比べて，ネットワークHWはまだまだユーザ拡張性が低い
\vspace{-.5em}
\begin{itemize}
\item 現在のOffload機能はL2\~{}L4パケットヘッダ操作が主流
    \begin{itemize}
        \item Capsulation, CSUM, TCP など
    \end{itemize}
\item Programmable NICの検討は始まっている
\end{itemize}
\vspace{.5em}

"NICがProgrammableであること"が最初の一歩
\vspace{-.5em}
\begin{itemize}
\item ヘッダやFIB操作はProgrammable NICやNPUで実現可能
\item ペイロード操作/Interrupt/PCIe/遅延制御などを直接触りたいならFPGA NICが有力
\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile,t]
  \frametitle{Systemverilogによるパケット処理例 [1/3]}

\begin{figure}

\begin{minted}[fontsize=\small]{verilog}
union packed {
        bit [5:0][63:0] raw;      // XGMII (64bit)
        struct packed {
                ethhdr eth;
                iphdr ip;
                udphdr udp;
                bit [47:0] payload;
        } hdr;
} tx_pkt, rx_pkt;
\end{minted}
\vspace{-1em}
\caption{パケット構造}
\end{figure}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{frame}[fragile,t]
  \frametitle{Systemverilogによるパケット処理例 [2/3]}

\begin{figure}

\begin{minted}[fontsize=\small]{verilog}
/* MAC adderss */
typedef bit [ETH_ALEN-1:0][7:0] macaddr_t;

/* ethernet header */
typedef struct packed {
        macaddr_t h_dest;
        macaddr_t h_source;
        bit [15:0] h_proto;
} ethhdr;
\end{minted}
\vspace{-1em}
\caption{パケット構造}
\end{figure}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Bar charts}
  \begin{figure}
    \input{fig/pcielane}
  \end{figure}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Bar charts}
  \begin{figure}
	\resizebox{\textheight}{!}{\input{fig/pcie-lane-bps}}
  \end{figure}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
  \frametitle{mtheme}

  The \emph{mtheme} is a Beamer theme with minimal visual noise inspired by the
  \ehref{https://github.com/hsrmbeamertheme/hsrmbeamertheme}{\textsc{hsrm} Beamer
  Theme} by Benjamin Weiss.

  Enable the theme by loading \faFrown

  \begin{minted}[fontsize=\small]{latex}
    \documentclass{beamer}
    \usetheme{m}
  \end{minted}

  Note, that you have to have Mozilla's \emph{Fira Sans} font and XeTeX
  installed to enjoy this wonderful typography.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Sections}
  Sections group slides of the same topic

  \begin{minted}[fontsize=\small]{latex}
    \section{Elements}
  \end{minted}

  for which the \emph{mtheme} provides a nice progress indicator \ldots
\end{frame}

\section{Elements}

\begin{frame}[fragile]
  \frametitle{Typography}
      \begin{minted}[fontsize=\small]{latex}
The theme provides sensible defaults to \emph{emphasize}
text, \alert{accent} parts or show \textbf{bold} results.
      \end{minted}

  \begin{center}becomes\end{center}

  The theme provides sensible defaults to \emph{emphasize} text,
  \alert{accent} parts or show \textbf{bold} results.
\end{frame}
\begin{frame}{Lists}
  \begin{columns}[onlytextwidth]
    \column{0.5\textwidth}
      Items
      \begin{itemize}
        \item Milk \item Eggs \item Potatos
      \end{itemize}

    \column{0.5\textwidth}
      Enumerations
      \begin{enumerate}
        \item First, \item Second and \item Last.
      \end{enumerate}
  \end{columns}
\end{frame}
\begin{frame}{Descriptions}
  \begin{description}
    \item[PowerPoint] Meeh.
    \item[Beamer] Yeeeha.
  \end{description}
\end{frame}
\begin{frame}{Animation}
  \begin{itemize}[<+- | alert@+>]
    \item \alert<4>{This is\only<4>{ really} important}
    \item Now this
    \item And now this
  \end{itemize}
\end{frame}
\begin{frame}{Figures}
  \begin{figure}
    \newcounter{density}
    \setcounter{density}{20}
    \input{fig/rotate}
    \caption{Rotated square from
    \ehref{http://www.texample.net/tikz/examples/rotated-polygons/}{texample.net}.}
  \end{figure}
\end{frame}
\begin{frame}{Tables}
  \begin{table}
    \caption{Largest cities in the world (source: Wikipedia)}
    \begin{tabular}{lr}
      \toprule
      City & Population\\
      \midrule
      Mexico City & 20,116,842\\
      Shanghai & 19,210,000\\
      Peking & 15,796,450\\
      Istanbul & 14,160,467\\
      \bottomrule
    \end{tabular}
  \end{table}
\end{frame}
\begin{frame}{Blocks}

  \begin{block}{This is a block title}
    This is soothing.
  \end{block}

\end{frame}
\begin{frame}{Math}
  \begin{equation*}
    e = \lim_{n\to \infty} \left(1 + \frac{1}{n}\right)^n
  \end{equation*}
\end{frame}
\begin{frame}{Line plots}
  \begin{figure}
    \input{fig/line}
  \end{figure}
\end{frame}
\begin{frame}{Bar charts}
  \begin{figure}
    \input{fig/bar}
  \end{figure}
\end{frame}
\begin{frame}{Quotes}
  \begin{quote}
    Veni, Vidi, Vici
  \end{quote}
\end{frame}


\section{Conclusion}

\begin{frame}{Summary}

  Get the source of this theme and the demo presentation from

  \begin{center}\url{github.com/matze/mtheme}\end{center}

  The theme \emph{itself} is licensed under a
  \ehref{http://creativecommons.org/licenses/by-sa/4.0/}{Creative Commons
  Attribution-ShareAlike 4.0 International License}.

\end{frame}

\plain{Questions? \faSmile}

\end{document}
